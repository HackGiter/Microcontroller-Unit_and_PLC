KEY1 EQU P3.1
KEY2 EQU P3.0
ORG 0000H;系统复位地址
LJMP MAIN;跳转到主程序
MAIN:
MOV SP,#60H;设堆栈指针，主程序开始
LCALL DELAY
DELAY:
X1:MOV R7,#5;延时参数设定
L3:MOV R6,#100;延时参数设定
L2:MOV R5,#250;延时参数设定
L1:DJNZ R5,L1;2us*250=500us=0.5ms
DJNZ R6,L2;0.5ms*100=50ms
DJNZ R7,L3;50ms*5=250ms=0.25s
JNB KEY1,CYCLE1;跳转亮灯方式1
JNB KEY2,CYCLE2;跳转亮灯方式2
RET

CYCLE1:;方式1
MOV P2,#01111111B
LCALL DELAY
MOV P2,#10111111B
LCALL DELAY
MOV P2,#11011111B
LCALL DELAY
MOV P2,#11101111B
LCALL DELAY
MOV P2,#11110111B
LCALL DELAY
MOV P2,#11111011B
LCALL DELAY
MOV P2,#11111101B
LCALL DELAY
MOV P2,#11111110B
LCALL DELAY
JMP CYCLE1

CYCLE2:;方式2
MOV P2,#00111111B
LCALL DELAY
MOV P2,#11001111B
LCALL DELAY
MOV P2,#11110011B
LCALL DELAY
MOV P2,#11111100B
LCALL DELAY
JMP CYCLE2

END